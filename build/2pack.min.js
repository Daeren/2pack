"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,i=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){i=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),packer=function(r){Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice});var e=function(){var r,e="undefined"!=typeof Buffer?Buffer:function(){var r=4096,e=2147483647;return function(){var n=function(){};return n.allocUnsafe=o,n.allocUnsafeSlow=o,n.byteLength=function(r){return t(r).length},n.prototype=Object.create(null),n.prototype.write=function(r,e,n){e=e||0,n=n||this.length;var o=this.length-e;(!n||n>o)&&(n=o);return i(t(r,this.length-e),this,e,n)},n.prototype.toString=function(e,t,n){return t=t||0,0===(n=n||this.length)?"":function(e,t,n){n=Math.min(e.length,n);for(var i=new Array,o=t;o<n;){var a=e[o],u=null,f=a>239?4:a>223?3:a>191?2:1;if(o+f<=n){var l=void 0,s=void 0,c=void 0,y=void 0;switch(f){case 1:a<128&&(u=a);break;case 2:128==(192&(l=e[o+1]))&&(y=(31&a)<<6|63&l)>127&&(u=y);break;case 3:l=e[o+1],s=e[o+2],128==(192&l)&&128==(192&s)&&(y=(15&a)<<12|(63&l)<<6|63&s)>2047&&(y<55296||y>57343)&&(u=y);break;case 4:l=e[o+1],s=e[o+2],c=e[o+3],128==(192&l)&&128==(192&s)&&128==(192&c)&&(y=(15&a)<<18|(63&l)<<12|(63&s)<<6|63&c)>65535&&y<1114112&&(u=y)}}null===u?(u=65533,f=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=f}return function(e){var t=e.length;if(t<=r)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=r));return n}(i)}(this,t,n)},n;function o(r){if(r>e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(r);return t.write=n.prototype.write,t.toString=n.prototype.toString,t}}();function t(r,e){e=e||1/0;for(var t=r.length,n=void 0,i=null,o=new Array,a=0;a<t;++a){if((n=r.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===t){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}}(),t=(r=new Uint32Array([305419896]),18===new Uint8Array(r.buffer,r.byteOffset,r.byteLength)[0]);return n.isBE=t,n.isLE=!t,n;function n(r,n,o){var a=1,u=2,f=4,l=8,s=16,c=32;r||(r=[]);var y=!!Array.isArray(r)&&r.some(function(r){return r.split(":").length>=2}),E=!Array.isArray(r)||r.some(function(r){return r.split(":").length<2});if(y&&E)throw new Error("A schema has mixed names/types");E&&(o=!0);for(var h,v="string"==typeof r,w=v?1:r.length,p=new Array(w),d=new Array(w),A=new Uint8Array(2),g=0,b=new Array,S=Object.create(null),U=!1,_=null,T=null,L=0,m=0,N=0,B=0;B<w;++B){var M=(h=v?["",r]:r[B].split(":")).length<2?null:h.shift(),k=h.shift(),P=J(k.replace(/[\d\[\]]/g,"")),R=x(P,parseInt(k.replace(/\D/g,""),10)||0),Y=_slicedToArray(R,3),I=Y[0],j=Y[1],O=Y[2],z=P&(a|u)?null:new Uint8Array(j.buffer),C=O?new Uint8Array(O.buffer):null;p[B]=[M,P,I,j,z,O,C],m+=I,N+=j.byteLength,!U&&P&(a|u)&&(U=!0)}return F(0),{get minSize(){return m},get maxSize(){return N},get offset(){return g},set offset(r){F(r)},pack:function(r,n){var o=Array.isArray(r),f=void 0,l=w,s=g,y=void 0,E=void 0,h=void 0,b=void 0,S=void 0,U=void 0,m=void 0,N=r;n=n||_;for(;l--;){var B=p[l],M=_slicedToArray(B,7);if(y=M[0],E=M[1],h=M[2],b=M[3],S=M[4],U=M[5],m=M[6],!v&&r&&(N=r[o?l:y]),E&u||E&a?(E&c&&(N=JSON.stringify(N)),N?(h+=U[0]=E&a?i(N,b,h,N.byteLength):b.write(N,h),(S=b)._bw=h,t?(b[0]=m[1],b[1]=m[0]):(b[0]=m[0],b[1]=m[1])):S=A):null===N||isNaN(N)||!isFinite(N)||void 0===N?b[0]=0:(b[0]=N,t&&b.byteLength>1&&S.reverse()),_)for(f=0;h--;)n[s++]=S[f++];else d[l]=S,s+=h}if(!_){n=n||(L===s?T:(T=e.allocUnsafe(s),L=T.length,T)),l=w,f=g;for(var k=void 0,P=void 0,R=void 0;l--;)for(k=d[l],P=0,R=k._bw||k.length;P<R;)n[f]=k[P],++f,++P}return n},unpack:function(r,i,f,l,s){var y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!n,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o;if(!w)return l&&l(g),null;if(!r||"object"!==(void 0===r?"undefined":_typeof(r))||r.byteLength<m)return;v||(s=s||(y?E?new Array:Object.create(null):E?b:S));var h=void 0,d=w,A=i+g,U=void 0,_=void 0,T=void 0,L=void 0,N=void 0,B=void 0,M=void 0,k=A;for(;d--;){var P=_slicedToArray(p[d],7);U=P[0],_=P[1],T=P[2],L=P[3],N=P[4],B=P[5],M=P[6];for(var R=0;R<T;++R){if(A>=f)return;B?M[R]=r[A++]:N[R]=r[A++]}if(_&u||_&a){t&&M.reverse();var Y=B[0];if(!Y||Y>=f)h=_&a||_&c?null:"";else{for(var I=Math.min(L.length-T,f,Y),j=_&a?e.allocUnsafe(I):L,O=0;O<I;++O,++A)j[O]=r[A];if(h=_&a?j:j.toString("utf8",0,I),_&c)try{h=JSON.parse(h)}catch(r){h=null}}}else t&&L.byteLength>1&&N.reverse(),h=L[0];v?s=h:(E&&(U=d),s[U]=h)}l&&l(g+A-k);return s}};function F(r){r=parseInt(r,10)||0,m=m-g+r,g=r,U||(_=new Uint8Array(m))}function x(r,t){if(r&a)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||1024)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&c)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||8192)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&u)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||256)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];switch(r){case f:switch(t){case 8:return[Int8Array.BYTES_PER_ELEMENT,new Int8Array(1)];case 16:return[Int16Array.BYTES_PER_ELEMENT,new Int16Array(1)];case 32:return[Int32Array.BYTES_PER_ELEMENT,new Int32Array(1)];default:throw new Error("Unknown size: "+t)}case l:switch(t){case 8:return[Uint8Array.BYTES_PER_ELEMENT,new Uint8Array(1)];case 16:return[Uint16Array.BYTES_PER_ELEMENT,new Uint16Array(1)];case 32:return[Uint32Array.BYTES_PER_ELEMENT,new Uint32Array(1)];default:throw new Error("Unknown size: "+t)}case s:switch(t){case 32:return[Float32Array.BYTES_PER_ELEMENT,new Float32Array(1)];case 64:return[Float64Array.BYTES_PER_ELEMENT,new Float64Array(1)];default:throw new Error("Unknown size: "+t)}default:throw new Error("Unknown type: "+r)}}function J(r){switch(r){case"b":case"bin":return a;case"j":case"json":return u|c;case"s":case"str":return u;case"i":case"int":return f;case"u":case"uint":return l;case"f":case"float":return s;default:throw new Error("Unknown type: "+r)}}}function i(r,e,t,n){if(!n)return 0;var i=e.length,o=r.length,a=void 0,u=void 0;for(a=0;a<n&&!((u=a+t)>=i||a>=o);++a)e[u]=r[a];return a}}();return e}();