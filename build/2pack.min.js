"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var n=[],t=!0,i=!1,a=void 0;try{for(var o,f=r[Symbol.iterator]();!(t=(o=f.next()).done)&&(n.push(o.value),!e||n.length!==e);t=!0);}catch(r){i=!0,a=r}finally{try{!t&&f.return&&f.return()}finally{if(i)throw a}}return n}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),packer=function(r){Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.byteLength),r=Math.floor(r),e=Math.floor(e),r<0&&(r+=this.byteLength),e<0&&(e+=this.byteLength),r=Math.min(Math.max(0,r),this.byteLength),(e=Math.min(Math.max(0,e),this.byteLength))-r<=0)return new ArrayBuffer(0);for(var n=e-r,t=new ArrayBuffer(n),i=new Uint8Array(t),a=new Uint8Array(this,r,n);n--;)i[n]=a[n];return i}});var e=function(){var r,e="undefined"!=typeof Buffer?Buffer:function(){var r=4096,e=2147483647;return function(){var n=function(){};return n.allocUnsafe=t,n.allocUnsafeSlow=t,n;function t(r){if(r>e)throw new RangeError("Invalid typed array length");var n=new Uint8Array(r);return n.write=a,n.toString=o,n}function a(r,e,n){e=e||0,n=n||this.length;var t=this.length-e;return(!n||n>t)&&(n=t),i(function(r,e){e=e||1/0;for(var n=r.length,t=void 0,i=null,a=new Array,o=0;o<n;++o){if((t=r.charCodeAt(o))>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return a}(r,this.length-e),this,e,n)}function o(e,n,t){return n=n||0,0===(t=t||this.length)?"":function(e,n,t){t=Math.min(e.length,t);var i=new Array,a=n;for(;a<t;){var o=e[a],f=null,u=o>239?4:o>223?3:o>191?2:1;if(a+u<=t){var s=void 0,l=void 0,y=void 0,c=void 0;switch(u){case 1:o<128&&(f=o);break;case 2:128==(192&(s=e[a+1]))&&(c=(31&o)<<6|63&s)>127&&(f=c);break;case 3:s=e[a+1],l=e[a+2],128==(192&s)&&128==(192&l)&&(c=(15&o)<<12|(63&s)<<6|63&l)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:s=e[a+1],l=e[a+2],y=e[a+3],128==(192&s)&&128==(192&l)&&128==(192&y)&&(c=(15&o)<<18|(63&s)<<12|(63&l)<<6|63&y)>65535&&c<1114112&&(f=c)}}null===f?(f=65533,u=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),a+=u}return function(e){var n=e.length;if(n<=r)return String.fromCharCode.apply(String,e);var t="",i=0;for(;i<n;)t+=String.fromCharCode.apply(String,e.slice(i,i+=r));return t}(i)}(this,n,t)}}()}(),n=(r=new Uint32Array([305419896]),18===new Uint8Array(r.buffer,r.byteOffset,r.byteLength)[0]);return t.isBE=n,t.isLE=!n,t;function t(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=1,f=2,u=4,s=8,l=16,y=32;if(null===r&&(r=[]),!r||!Array.isArray(r)&&"string"!=typeof r)throw new Error("Invalid schema");var c=!!Array.isArray(r)&&r.some(function(r){return r.split(":").length>=2}),E=!Array.isArray(r)||r.some(function(r){return r.split(":").length<2});if(c&&E)throw new Error("A schema has mixed names/types");E&&(a=!0);for(var h="undefined"!=typeof BigInt64Array?BigInt64Array.BYTES_PER_ELEMENT:0,w="string"==typeof r,A=w?1:r.length,v=new Array(A),g=(new Uint8Array(2),null),p=0,d=0,b=0,S=new Array,_=Object.create(null),T=0;T<A;++T){var U=w?[r,""]:r[T].split(":").reverse(),L=_slicedToArray(U,2),B=L[0],m=L[1],M=z(B.replace(/[\d\[\]]/g,"")),N=O(M,parseInt(B.replace(/\D/g,""),10)||0),P=_slicedToArray(N,3),R=P[0],I=P[1],Y=P[2],k=M&f||M&o?null:new Uint8Array(I.buffer),j=Y?new Uint8Array(Y.buffer):null;v[T]=[m,M,R,I,k,Y,j],d+=R,b+=I.byteLength}return x(0),{get minSize(){return d},get maxSize(){return b},get offset(){return p},set offset(r){x(r)},pack:function(r,e){var t=Array.isArray(r),a=!!e,u=A,s=p,l=r,c=void 0,E=void 0,d=void 0,S=void 0,_=void 0,T=void 0,U=void 0;e=e||g;for(;u--;){var L=v[u],B=_slicedToArray(L,7);if(c=B[0],E=B[1],d=B[2],S=B[3],_=B[4],T=B[5],U=B[6],!w&&r&&(l=r[t?u:c]),E&f||E&o)E&y&&(l=JSON.stringify(l)),l?(d+=T[0]=E&o?i(l,e,s+d,S.byteLength-d):e.write(l,s+d,S.byteLength-d),n?(e[s]=U[1],e[s+1]=U[0]):(e[s]=U[0],e[s+1]=U[1]),s+=d):(e[s]=0,e[s+1]=0,s+=2);else{var m=0;d===h&&(m=BigInt("0")),null==l||"bigint"!=typeof l&&(isNaN(l)||!isFinite(l))?S[0]=m:(S[0]=l,n&&S.byteLength>1&&_.reverse());for(var M=0;M<d;)e[s]=_[M],++s,++M}}return!a&&s<b?e.slice(0,s):e},unpack:function(r,i,u,s,l){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!t,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a;if(!A)return s&&s(p),null;if(!r||"object"!==(void 0===r?"undefined":_typeof(r))||r.byteLength<d)return;w||(l=l||(c?E?new Array:Object.create(null):E?S:_));var h=A,g=i+p,b=g;for(;h--;){for(var T=void 0,U=_slicedToArray(v[h],7),L=U[0],B=U[1],m=U[2],M=U[3],N=U[4],P=U[5],R=U[6],I=0;I<m;++I){if(g>=u)return;P?R[I]=r[g]:N[I]=r[g],++g}if(B&f||B&o){n&&R.reverse();var Y=P[0];if(Y){if(Y>=u||Y>M.byteLength)return;if(B&o){for(var k=e.allocUnsafeSlow(Y),j=0;j<Y;++j,++g)k[j]=r[g];T=k}else T=r instanceof e?r.toString("utf8",g,g+Y):e.from?e.from(r).toString("utf8",g,g+Y):M.toString.call(r,"utf8",g,g+Y),g+=Y;if(B&y)try{T=JSON.parse(T)}catch(r){T=null}}else T=B&o||B&y?null:""}else n&&M.byteLength>1&&N.reverse(),T=M[0];w?l=T:(E&&(L=h),l[L]=T)}s&&s(p+g-b);return l}};function x(r){r=parseInt(r,10)||0,d=d-p+r,b=b-p+r,p=r,g=e.allocUnsafeSlow(b)}function O(r,n){if(r&o)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((n||1024)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&y)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((n||8192)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&f)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((n||256)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];switch(r){case u:switch(n){case 8:return[Int8Array.BYTES_PER_ELEMENT,new Int8Array(1)];case 16:return[Int16Array.BYTES_PER_ELEMENT,new Int16Array(1)];case 32:return[Int32Array.BYTES_PER_ELEMENT,new Int32Array(1)];case 64:return[BigInt64Array.BYTES_PER_ELEMENT,new BigInt64Array(1)];default:throw new Error("Unknown size: "+n+" | "+r)}case s:switch(n){case 8:return[Uint8Array.BYTES_PER_ELEMENT,new Uint8Array(1)];case 16:return[Uint16Array.BYTES_PER_ELEMENT,new Uint16Array(1)];case 32:return[Uint32Array.BYTES_PER_ELEMENT,new Uint32Array(1)];case 64:return[BigUint64Array.BYTES_PER_ELEMENT,new BigUint64Array(1)];default:throw new Error("Unknown size: "+n+" | "+r)}case l:switch(n){case 32:return[Float32Array.BYTES_PER_ELEMENT,new Float32Array(1)];case 64:return[Float64Array.BYTES_PER_ELEMENT,new Float64Array(1)];default:throw new Error("Unknown size: "+n+" | "+r)}default:throw new Error("Unknown type: "+r+" | "+r)}}function z(r){switch(r){case"b":case"bin":return o;case"j":case"json":return f|y;case"s":case"str":return f;case"i":case"int":return u;case"u":case"uint":return s;case"f":case"float":return l;default:throw new Error("Unknown type: "+r)}}}function i(r,e,n,t){if(!t)return 0;var i=e.length,a=r.length,o=void 0,f=void 0;for(o=0;o<t&&!((f=o+n)>=i||o>=a);++o)e[f]=r[o];return o}}();return r.exports=e,r.exports}({});