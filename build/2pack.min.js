"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_slicedToArray=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!e||t.length!==e);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),packer=function(r){Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.byteLength),r=Math.floor(r),e=Math.floor(e),r<0&&(r+=this.byteLength),e<0&&(e+=this.byteLength),r=Math.min(Math.max(0,r),this.byteLength),(e=Math.min(Math.max(0,e),this.byteLength))-r<=0)return new ArrayBuffer(0);for(var t=e-r,n=new ArrayBuffer(t),i=new Uint8Array(n),a=new Uint8Array(this,r,t);t--;)i[t]=a[t];return i}});var e=function(){var r,e="undefined"!=typeof Buffer?Buffer:function(){var r=4096,e=2147483647;return function(){var t=function(){};return t.allocUnsafe=n,t.allocUnsafeSlow=n,t;function n(r){if(r>e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(r);return t.write=a,t.toString=o,t}function a(r,e,t){e=e||0,t=t||this.length;var n=this.length-e;return(!t||t>n)&&(t=n),i(function(r,e){e=e||1/0;for(var t=r.length,n=void 0,i=null,a=new Array,o=0;o<t;++o){if((n=r.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===t){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}(r,this.length-e),this,e,t)}function o(e,t,n){return t=t||0,0===(n=n||this.length)?"":function(e,t,n){n=Math.min(e.length,n);var i=new Array,a=t;for(;a<n;){var o=e[a],u=null,f=o>239?4:o>223?3:o>191?2:1;if(a+f<=n){var s=void 0,l=void 0,y=void 0,c=void 0;switch(f){case 1:o<128&&(u=o);break;case 2:128==(192&(s=e[a+1]))&&(c=(31&o)<<6|63&s)>127&&(u=c);break;case 3:s=e[a+1],l=e[a+2],128==(192&s)&&128==(192&l)&&(c=(15&o)<<12|(63&s)<<6|63&l)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=e[a+1],l=e[a+2],y=e[a+3],128==(192&s)&&128==(192&l)&&128==(192&y)&&(c=(15&o)<<18|(63&s)<<12|(63&l)<<6|63&y)>65535&&c<1114112&&(u=c)}}null===u?(u=65533,f=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),a+=f}return function(e){var t=e.length;if(t<=r)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=r));return n}(i)}(this,t,n)}}()}(),t=(r=new Uint32Array([305419896]),18===new Uint8Array(r.buffer,r.byteOffset,r.byteLength)[0]);return n.isBE=t,n.isLE=!t,n;function n(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=1,u=2,f=4,s=8,l=16,y=32;if(null===r&&(r=[]),!r||!Array.isArray(r)&&"string"!=typeof r)throw new Error("Invalid schema");var c=!!Array.isArray(r)&&r.some(function(r){return r.split(":").length>=2}),E=!Array.isArray(r)||r.some(function(r){return r.split(":").length<2});if(c&&E)throw new Error("A schema has mixed names/types");E&&(a=!0);for(var h="string"==typeof r,w=h?1:r.length,A=new Array(w),v=(new Uint8Array(2),null),g=0,p=0,d=0,b=new Array,S=Object.create(null),U=0;U<w;++U){var _=h?[r,""]:r[U].split(":").reverse(),T=_slicedToArray(_,2),L=T[0],m=T[1],B=O(L.replace(/[\d\[\]]/g,"")),M=x(B,parseInt(L.replace(/\D/g,""),10)||0),N=_slicedToArray(M,3),P=N[0],R=N[1],Y=N[2],k=B&u||B&o?null:new Uint8Array(R.buffer),I=Y?new Uint8Array(Y.buffer):null;A[U]=[m,B,P,R,k,Y,I],p+=P,d+=R.byteLength}return j(0),{get minSize(){return p},get maxSize(){return d},get offset(){return g},set offset(r){j(r)},pack:function(r,e){var n=Array.isArray(r),a=!!e,f=w,s=g,l=r,c=void 0,E=void 0,p=void 0,b=void 0,S=void 0,U=void 0,_=void 0;e=e||v;for(;f--;){var T=A[f],L=_slicedToArray(T,7);if(c=L[0],E=L[1],p=L[2],b=L[3],S=L[4],U=L[5],_=L[6],!h&&r&&(l=r[n?f:c]),E&u||E&o)E&y&&(l=JSON.stringify(l)),l?(p+=U[0]=E&o?i(l,e,s+p,b.byteLength-p):e.write(l,s+p,b.byteLength-p),t?(e[s]=_[1],e[s+1]=_[0]):(e[s]=_[0],e[s+1]=_[1]),s+=p):(e[s]=0,e[s+1]=0,s+=2);else{null==l||"bigint"!=typeof l&&(isNaN(l)||!isFinite(l))?b[0]=0:(b[0]=l,t&&b.byteLength>1&&S.reverse());for(var m=0;m<p;)e[s]=S[m],++s,++m}}return!a&&s<d?e.slice(0,s):e},unpack:function(r,i,f,s,l){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!n,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a;if(!w)return s&&s(g),null;if(!r||"object"!==(void 0===r?"undefined":_typeof(r))||r.byteLength<p)return;h||(l=l||(c?E?new Array:Object.create(null):E?b:S));var v=w,d=i+g,U=d;for(;v--;){for(var _=void 0,T=_slicedToArray(A[v],7),L=T[0],m=T[1],B=T[2],M=T[3],N=T[4],P=T[5],R=T[6],Y=0;Y<B;++Y){if(d>=f)return;P?R[Y]=r[d]:N[Y]=r[d],++d}if(m&u||m&o){t&&R.reverse();var k=P[0];if(k){if(k>=f||k>M.byteLength)return;if(m&o){for(var I=e.allocUnsafeSlow(k),j=0;j<k;++j,++d)I[j]=r[d];_=I}else _=r instanceof e?r.toString("utf8",d,d+k):e.from?e.from(r).toString("utf8",d,d+k):M.toString.call(r,"utf8",d,d+k),d+=k;if(m&y)try{_=JSON.parse(_)}catch(r){_=null}}else _=m&o||m&y?null:""}else t&&M.byteLength>1&&N.reverse(),_=M[0];h?l=_:(E&&(L=v),l[L]=_)}s&&s(g+d-U);return l}};function j(r){r=parseInt(r,10)||0,p=p-g+r,d=d-g+r,g=r,v=e.allocUnsafeSlow(d)}function x(r,t){if(r&o)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||1024)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&y)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||8192)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];if(r&u)return[Uint16Array.BYTES_PER_ELEMENT,e.allocUnsafeSlow((t||256)+Uint16Array.BYTES_PER_ELEMENT),new Uint16Array(1)];switch(r){case f:switch(t){case 8:return[Int8Array.BYTES_PER_ELEMENT,new Int8Array(1)];case 16:return[Int16Array.BYTES_PER_ELEMENT,new Int16Array(1)];case 32:return[Int32Array.BYTES_PER_ELEMENT,new Int32Array(1)];case 64:return[BigInt64Array.BYTES_PER_ELEMENT,new BigInt64Array(1)];default:throw new Error("Unknown size: "+t)}case s:switch(t){case 8:return[Uint8Array.BYTES_PER_ELEMENT,new Uint8Array(1)];case 16:return[Uint16Array.BYTES_PER_ELEMENT,new Uint16Array(1)];case 32:return[Uint32Array.BYTES_PER_ELEMENT,new Uint32Array(1)];case 64:return[BigUint64Array.BYTES_PER_ELEMENT,new BigUint64Array(1)];default:throw new Error("Unknown size: "+t)}case l:switch(t){case 32:return[Float32Array.BYTES_PER_ELEMENT,new Float32Array(1)];case 64:return[Float64Array.BYTES_PER_ELEMENT,new Float64Array(1)];default:throw new Error("Unknown size: "+t)}default:throw new Error("Unknown type: "+r)}}function O(r){switch(r){case"b":case"bin":return o;case"j":case"json":return u|y;case"s":case"str":return u;case"i":case"int":return f;case"u":case"uint":return s;case"f":case"float":return l;default:throw new Error("Unknown type: "+r)}}}function i(r,e,t,n){if(!n)return 0;var i=e.length,a=r.length,o=void 0,u=void 0;for(o=0;o<n&&!((u=o+t)>=i||o>=a);++o)e[u]=r[o];return o}}();return r.exports=e,r.exports}({});